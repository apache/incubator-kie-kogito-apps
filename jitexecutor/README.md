# Kogito JIT Executor

Kogito JIT (Just In Time) Executor is an application that allow to execute a business model on the fly on a given context. 

At the moment, the application supports only DMN models.

Once the user has compiled and packaged the application for example with:

```bash
mvn clean package -DskipTests
```

run the generated application under `jitexecutor-runner/target` with 

```bash
java -jar jitexecutor-runner/target/jitexecutor-runner-2.0.0-SNAPSHOT-runner.jar
``` 

An helper HTML page is available at `localhost:8080/index.html`. You can use this page to submit a DMN model with a context and get back the results. 
Otherwise, you can make a POST request directly to the endpoint `/jitdmn` with the following body

```json

{
  "model" : "<your DMN model in base64 encoding here>",
  "context" : "{<your context here>}"
}
``` 

Note that the DMN model must be [base64 encoded](https://en.wikipedia.org/wiki/Base64).

For example, using a simple DMN model that sum two input numbers: 

```bash
curl -H "Content-Type: application/json" -X POST http://localhost:8080/jitdmn -d '{"context": {"n" : 1, "m" : 2}, "model": "PGRtbjpkZWZpbml0aW9ucyB4bWxuczpkbW49Imh0dHA6Ly93d3cub21nLm9yZy9zcGVjL0RNTi8yMDE4MDUyMS9NT0RFTC8iIHhtbG5zPSJodHRwczovL2tpZWdyb3VwLm9yZy9kbW4vXzM1MDkxQzNCLTYwMjItNEQ0MC04OTgyLUQ1Mjg5NDBDRDVGOSIgeG1sbnM6ZmVlbD0iaHR0cDovL3d3dy5vbWcub3JnL3NwZWMvRE1OLzIwMTgwNTIxL0ZFRUwvIiB4bWxuczpraWU9Imh0dHA6Ly93d3cuZHJvb2xzLm9yZy9raWUvZG1uLzEuMiIgeG1sbnM6ZG1uZGk9Imh0dHA6Ly93d3cub21nLm9yZy9zcGVjL0RNTi8yMDE4MDUyMS9ETU5ESS8iIHhtbG5zOmRpPSJodHRwOi8vd3d3Lm9tZy5vcmcvc3BlYy9ETU4vMjAxODA1MjEvREkvIiB4bWxuczpkYz0iaHR0cDovL3d3dy5vbWcub3JnL3NwZWMvRE1OLzIwMTgwNTIxL0RDLyIgaWQ9Il84MUEzMUI0Mi1BNjg2LTRFRDItODFGQi1DMUY5MUE5NUQ2ODUiIG5hbWU9Im5ldy1maWxlIiB0eXBlTGFuZ3VhZ2U9Imh0dHA6Ly93d3cub21nLm9yZy9zcGVjL0RNTi8yMDE4MDUyMS9GRUVMLyIgbmFtZXNwYWNlPSJodHRwczovL2tpZWdyb3VwLm9yZy9kbW4vXzM1MDkxQzNCLTYwMjItNEQ0MC04OTgyLUQ1Mjg5NDBDRDVGOSI+CiAgPGRtbjpleHRlbnNpb25FbGVtZW50cy8+CiAgPGRtbjppbnB1dERhdGEgaWQ9Il82RkZBNDhCNS1GQjU1LTQ5NjItOUU2NC1GMDg0MThCQkZGOUUiIG5hbWU9Im4iPgogICAgPGRtbjpleHRlbnNpb25FbGVtZW50cy8+CiAgICA8ZG1uOnZhcmlhYmxlIGlkPSJfRUM0RDEyM0EtRDZENC00RTVELUIzNjktNkU5OUY1N0Q5QzIyIiBuYW1lPSJuIiB0eXBlUmVmPSJudW1iZXIiLz4KICA8L2RtbjppbnB1dERhdGE+CiAgPGRtbjpkZWNpc2lvbiBpZD0iXzFENjlDNDRFLUQ3ODItNDkyQS1BNTBELTc0MEI0NDRGMTk5MyIgbmFtZT0ic3VtIj4KICAgIDxkbW46ZXh0ZW5zaW9uRWxlbWVudHMvPgogICAgPGRtbjp2YXJpYWJsZSBpZD0iXzNBRjdBNzA1LTgzMDQtNEI1RS04RUM3LTA1RDk5MzRFNkMwNiIgbmFtZT0ic3VtIiB0eXBlUmVmPSJudW1iZXIiLz4KICAgIDxkbW46aW5mb3JtYXRpb25SZXF1aXJlbWVudCBpZD0iX0UwRkU1QzkwLTVFQUYtNDVEQi1BQkZELTEwRDI3RkE5N0FCNCI+CiAgICAgIDxkbW46cmVxdWlyZWRJbnB1dCBocmVmPSIjXzZGRkE0OEI1LUZCNTUtNDk2Mi05RTY0LUYwODQxOEJCRkY5RSIvPgogICAgPC9kbW46aW5mb3JtYXRpb25SZXF1aXJlbWVudD4KICAgIDxkbW46aW5mb3JtYXRpb25SZXF1aXJlbWVudCBpZD0iX0M1MkNCMjlFLTMyMzYtNDY2MS04ODU2LTcyNzZBRThFRDAxRiI+CiAgICAgIDxkbW46cmVxdWlyZWRJbnB1dCBocmVmPSIjX0I4MjIxQTA3LURGQjUtNDBCQy05NUE5LTc5MjZBNkVDNTVDNCIvPgogICAgPC9kbW46aW5mb3JtYXRpb25SZXF1aXJlbWVudD4KICAgIDxkbW46bGl0ZXJhbEV4cHJlc3Npb24gaWQ9Il8zREIzMzAzNC1BQzIxLTQ1REUtQTVCNy1ENkIwOUIwMUVEMUUiPgogICAgICA8ZG1uOnRleHQ+biArIG08L2Rtbjp0ZXh0PgogICAgPC9kbW46bGl0ZXJhbEV4cHJlc3Npb24+CiAgPC9kbW46ZGVjaXNpb24+CiAgPGRtbjppbnB1dERhdGEgaWQ9Il9CODIyMUEwNy1ERkI1LTQwQkMtOTVBOS03OTI2QTZFQzU1QzQiIG5hbWU9Im0iPgogICAgPGRtbjpleHRlbnNpb25FbGVtZW50cy8+CiAgICA8ZG1uOnZhcmlhYmxlIGlkPSJfNDU1Q0Q1NzEtQkJEOS00NzYyLUI0OTYtODMyRTdFQkNEMDdGIiBuYW1lPSJtIiB0eXBlUmVmPSJudW1iZXIiLz4KICA8L2RtbjppbnB1dERhdGE+CiAgPGRtbmRpOkRNTkRJPgogICAgPGRtbmRpOkRNTkRpYWdyYW0gaWQ9Il83RkMxRTk5Ny1BNjI3LTQwOUUtQTZENS05QTMwRjJGMzBBQjQiIG5hbWU9IkRSRyI+CiAgICAgIDxkaTpleHRlbnNpb24+CiAgICAgICAgPGtpZTpDb21wb25lbnRzV2lkdGhzRXh0ZW5zaW9uPgogICAgICAgICAgPGtpZTpDb21wb25lbnRXaWR0aHMgZG1uRWxlbWVudFJlZj0iXzNEQjMzMDM0LUFDMjEtNDVERS1BNUI3LUQ2QjA5QjAxRUQxRSI+CiAgICAgICAgICAgIDxraWU6d2lkdGg+MzAwPC9raWU6d2lkdGg+CiAgICAgICAgICA8L2tpZTpDb21wb25lbnRXaWR0aHM+CiAgICAgICAgPC9raWU6Q29tcG9uZW50c1dpZHRoc0V4dGVuc2lvbj4KICAgICAgPC9kaTpleHRlbnNpb24+CiAgICAgIDxkbW5kaTpETU5TaGFwZSBpZD0iZG1uc2hhcGUtZHJnLV82RkZBNDhCNS1GQjU1LTQ5NjItOUU2NC1GMDg0MThCQkZGOUUiIGRtbkVsZW1lbnRSZWY9Il82RkZBNDhCNS1GQjU1LTQ5NjItOUU2NC1GMDg0MThCQkZGOUUiIGlzQ29sbGFwc2VkPSJmYWxzZSI+CiAgICAgICAgPGRtbmRpOkRNTlN0eWxlPgogICAgICAgICAgPGRtbmRpOkZpbGxDb2xvciByZWQ9IjI1NSIgZ3JlZW49IjI1NSIgYmx1ZT0iMjU1Ii8+CiAgICAgICAgICA8ZG1uZGk6U3Ryb2tlQ29sb3IgcmVkPSIwIiBncmVlbj0iMCIgYmx1ZT0iMCIvPgogICAgICAgICAgPGRtbmRpOkZvbnRDb2xvciByZWQ9IjAiIGdyZWVuPSIwIiBibHVlPSIwIi8+CiAgICAgICAgPC9kbW5kaTpETU5TdHlsZT4KICAgICAgICA8ZGM6Qm91bmRzIHg9IjcwNCIgeT0iMzY0IiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIi8+CiAgICAgICAgPGRtbmRpOkRNTkxhYmVsLz4KICAgICAgPC9kbW5kaTpETU5TaGFwZT4KICAgICAgPGRtbmRpOkRNTlNoYXBlIGlkPSJkbW5zaGFwZS1kcmctXzFENjlDNDRFLUQ3ODItNDkyQS1BNTBELTc0MEI0NDRGMTk5MyIgZG1uRWxlbWVudFJlZj0iXzFENjlDNDRFLUQ3ODItNDkyQS1BNTBELTc0MEI0NDRGMTk5MyIgaXNDb2xsYXBzZWQ9ImZhbHNlIj4KICAgICAgICA8ZG1uZGk6RE1OU3R5bGU+CiAgICAgICAgICA8ZG1uZGk6RmlsbENvbG9yIHJlZD0iMjU1IiBncmVlbj0iMjU1IiBibHVlPSIyNTUiLz4KICAgICAgICAgIDxkbW5kaTpTdHJva2VDb2xvciByZWQ9IjAiIGdyZWVuPSIwIiBibHVlPSIwIi8+CiAgICAgICAgICA8ZG1uZGk6Rm9udENvbG9yIHJlZD0iMCIgZ3JlZW49IjAiIGJsdWU9IjAiLz4KICAgICAgICA8L2RtbmRpOkRNTlN0eWxlPgogICAgICAgIDxkYzpCb3VuZHMgeD0iNzU2IiB5PSIyODMiIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiLz4KICAgICAgICA8ZG1uZGk6RE1OTGFiZWwvPgogICAgICA8L2RtbmRpOkRNTlNoYXBlPgogICAgICA8ZG1uZGk6RE1OU2hhcGUgaWQ9ImRtbnNoYXBlLWRyZy1fQjgyMjFBMDctREZCNS00MEJDLTk1QTktNzkyNkE2RUM1NUM0IiBkbW5FbGVtZW50UmVmPSJfQjgyMjFBMDctREZCNS00MEJDLTk1QTktNzkyNkE2RUM1NUM0IiBpc0NvbGxhcHNlZD0iZmFsc2UiPgogICAgICAgIDxkbW5kaTpETU5TdHlsZT4KICAgICAgICAgIDxkbW5kaTpGaWxsQ29sb3IgcmVkPSIyNTUiIGdyZWVuPSIyNTUiIGJsdWU9IjI1NSIvPgogICAgICAgICAgPGRtbmRpOlN0cm9rZUNvbG9yIHJlZD0iMCIgZ3JlZW49IjAiIGJsdWU9IjAiLz4KICAgICAgICAgIDxkbW5kaTpGb250Q29sb3IgcmVkPSIwIiBncmVlbj0iMCIgYmx1ZT0iMCIvPgogICAgICAgIDwvZG1uZGk6RE1OU3R5bGU+CiAgICAgICAgPGRjOkJvdW5kcyB4PSI4MjIiIHk9IjM2NCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI1MCIvPgogICAgICAgIDxkbW5kaTpETU5MYWJlbC8+CiAgICAgIDwvZG1uZGk6RE1OU2hhcGU+CiAgICAgIDxkbW5kaTpETU5FZGdlIGlkPSJkbW5lZGdlLWRyZy1fRTBGRTVDOTAtNUVBRi00NURCLUFCRkQtMTBEMjdGQTk3QUI0IiBkbW5FbGVtZW50UmVmPSJfRTBGRTVDOTAtNUVBRi00NURCLUFCRkQtMTBEMjdGQTk3QUI0Ij4KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iNzU0IiB5PSIzODkiLz4KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iODA2IiB5PSIzMzMiLz4KICAgICAgPC9kbW5kaTpETU5FZGdlPgogICAgICA8ZG1uZGk6RE1ORWRnZSBpZD0iZG1uZWRnZS1kcmctX0M1MkNCMjlFLTMyMzYtNDY2MS04ODU2LTcyNzZBRThFRDAxRiIgZG1uRWxlbWVudFJlZj0iX0M1MkNCMjlFLTMyMzYtNDY2MS04ODU2LTcyNzZBRThFRDAxRiI+CiAgICAgICAgPGRpOndheXBvaW50IHg9Ijg3MiIgeT0iMzg5Ii8+CiAgICAgICAgPGRpOndheXBvaW50IHg9IjgwNiIgeT0iMzMzIi8+CiAgICAgIDwvZG1uZGk6RE1ORWRnZT4KICAgIDwvZG1uZGk6RE1ORGlhZ3JhbT4KICA8L2RtbmRpOkRNTkRJPgo8L2RtbjpkZWZpbml0aW9ucz4="}'
```

The response is 
```
{"sum":3,"m":2,"n":1}
```

If you are interested in the full DMN result, you can use the endpoint `/jitdmn/dmnresult` with the same payload. In this case, the response would be 
```bash
{
  "namespace": "https://kiegroup.org/dmn/_35091C3B-6022-4D40-8982-D528940CD5F9",
  "modelName": "new-file",
  "dmnContext": {
    "sum": 3,
    "m": 2,
    "n": 1
  },
  "messages": [],
  "decisionResults": [
    {
      "decisionId": "_1D69C44E-D782-492A-A50D-740B444F1993",
      "decisionName": "sum",
      "result": 3,
      "messages": [],
      "evaluationStatus": "SUCCEEDED"
    }
  ]
}
```

## Native application

The native mode is supported by this application. You can create the native Quarkus application for example with 

```bash
mvn clean package -DskipTests -Pnative
```